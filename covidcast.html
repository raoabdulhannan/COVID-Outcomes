<!DOCTYPE html>
<html xmlns="http://www.w3.org/1999/xhtml" lang="en" xml:lang="en"><head>

<meta charset="utf-8">
<meta name="generator" content="quarto-1.5.57">

<meta name="viewport" content="width=device-width, initial-scale=1.0, user-scalable=yes">

<meta name="author" content="Rao Abdul Hannan">

<title>Predicting COVID Outcomes using CTIS</title>
<style>
code{white-space: pre-wrap;}
span.smallcaps{font-variant: small-caps;}
div.columns{display: flex; gap: min(4vw, 1.5em);}
div.column{flex: auto; overflow-x: auto;}
div.hanging-indent{margin-left: 1.5em; text-indent: -1.5em;}
ul.task-list{list-style: none;}
ul.task-list li input[type="checkbox"] {
  width: 0.8em;
  margin: 0 0.8em 0.2em -1em; /* quarto-specific, see https://github.com/quarto-dev/quarto-cli/issues/4556 */ 
  vertical-align: middle;
}
</style>


<script src="covidcast_files/libs/clipboard/clipboard.min.js"></script>
<script src="covidcast_files/libs/quarto-html/quarto.js"></script>
<script src="covidcast_files/libs/quarto-html/popper.min.js"></script>
<script src="covidcast_files/libs/quarto-html/tippy.umd.min.js"></script>
<script src="covidcast_files/libs/quarto-html/anchor.min.js"></script>
<link href="covidcast_files/libs/quarto-html/tippy.css" rel="stylesheet">
<link href="covidcast_files/libs/quarto-html/quarto-syntax-highlighting.css" rel="stylesheet" id="quarto-text-highlighting-styles">
<script src="covidcast_files/libs/bootstrap/bootstrap.min.js"></script>
<link href="covidcast_files/libs/bootstrap/bootstrap-icons.css" rel="stylesheet">
<link href="covidcast_files/libs/bootstrap/bootstrap.min.css" rel="stylesheet" id="quarto-bootstrap" data-mode="light">

  <script src="https://cdnjs.cloudflare.com/polyfill/v3/polyfill.min.js?features=es6"></script>
  <script src="https://cdn.jsdelivr.net/npm/mathjax@3/es5/tex-chtml-full.js" type="text/javascript"></script>

<script type="text/javascript">
const typesetMath = (el) => {
  if (window.MathJax) {
    // MathJax Typeset
    window.MathJax.typeset([el]);
  } else if (window.katex) {
    // KaTeX Render
    var mathElements = el.getElementsByClassName("math");
    var macros = [];
    for (var i = 0; i < mathElements.length; i++) {
      var texText = mathElements[i].firstChild;
      if (mathElements[i].tagName == "SPAN") {
        window.katex.render(texText.data, mathElements[i], {
          displayMode: mathElements[i].classList.contains('display'),
          throwOnError: false,
          macros: macros,
          fleqn: false
        });
      }
    }
  }
}
window.Quarto = {
  typesetMath
};
</script>

</head>

<body class="fullcontent">

<div id="quarto-content" class="page-columns page-rows-contents page-layout-article">

<main class="content" id="quarto-document-content">

<header id="title-block-header" class="quarto-title-block default">
<div class="quarto-title">
<h1 class="title">Predicting COVID Outcomes using CTIS</h1>
<p class="subtitle lead">CTIS: COVID Trends &amp; Impact Survey</p>
</div>



<div class="quarto-title-meta">

    <div>
    <div class="quarto-title-meta-heading">Author</div>
    <div class="quarto-title-meta-contents">
             <p>Rao Abdul Hannan </p>
          </div>
  </div>
    
  
    
  </div>
  


</header>


<section id="exploratory-data-analysis" class="level1">
<h1>Exploratory Data Analysis</h1>
<p>We use the <code>covid.csv</code> dataset for this report which has been compiled by the U.S. Department of Health, Education and Welfare (HEW), and contains variables that capture COVID activity, schooling, vaccination, behavior and beliefs, aggregated on the county level. Focusing on the first problem, we use the following response variable:</p>
<ul>
<li><code>cli</code>: estimated percentage of people with COVID-Like illness, defined as experiencing cough, shortness of breath, or difficulty breathing. <code>tested_positive_14d</code> and <code>confirmed_7dav_incidence_prop</code> might seem more intuitive given the first problem however, the former depends on testing facilities which are not readily available throughout each county whereas the latter only captures information about new weekly cases in a county instead of the full severity of COVID activity. The distributions of <code>cli</code> and <span class="math inline">\(\sqrt{\text{cli}}\)</span> are displayed in Figure 1. The original variable shows slight skeweness to the right, motivating us to apply the square root transformation to make the distribution more normal-like as depicted by the red density curves. It is also easily noticeable some missing bars in both histograms; these represent rows in our dataset which had ‘NA’ values for other variables and therefore we exclude them from our analysis.</li>
</ul>
<div class="cell">
<div class="cell-output-display">
<div>
<figure class="figure">
<p><img src="covidcast_files/figure-html/unnamed-chunk-3-1.png" class="img-fluid figure-img" width="960"></p>
</figure>
</div>
</div>
</div>
<p>The primary covariates of concern for the first problem are <code>inperson_school_fulltime</code> and <code>inperson_school_parttime</code>. Figure 2 shows the distributions of these two variables against the response, which do not point towards strong associations however, we use regression later in the report to answer this question statistically. The plots show no evident signs of non-linear relationships between the covariates and response, and hence we assume the relationship is linear. </p>
<div class="cell">
<div class="cell-output-display">
<div>
<figure class="figure">
<p><img src="covidcast_files/figure-html/unnamed-chunk-4-1.png" class="img-fluid figure-img" width="672"></p>
</figure>
</div>
</div>
</div>
<p>Apart from the two primary covariates, there are three other variables that show a strong association with <code>cli</code>, namely <code>covid_vaccinated_or_accept</code>, <code>wearing_mask</code>, and <code>large_event_1d</code>. Figure 3 shows these associations along with correlation values. </p>
<div class="cell">
<div class="cell-output-display">
<div>
<figure class="figure">
<p><img src="covidcast_files/figure-html/unnamed-chunk-5-1.png" class="img-fluid figure-img" width="768"></p>
</figure>
</div>
</div>
</div>
<div style="page-break-after: always;"></div>
<p>Moving on to the second problem for which our response variable is:</p>
<ul>
<li><code>covid_vaccinated_or_accept</code>: estimated percentage of respondents who either have already received a COVID vaccine or have an appointment to get a COVID vaccine or would definitely or probably choose to get vaccinated, if a vaccine were offered to them today. We choose this variable over <code>covid_vaccinated</code> since it also accounts for people who have already booked a vaccination appointment or would do so when they get the opportunity. This is important because during the time period the data was collected, COVID vaccines were not readily available so there was a considerable part of the public that wanted to get a vaccination but was merely waiting for it to be available. The distribution, displayed in Figure 4, is fairly normal and we decide not to use any transformations on it</li>
</ul>
<div class="cell">
<div class="cell-output-display">
<div>
<figure class="figure">
<p><img src="covidcast_files/figure-html/unnamed-chunk-6-1.png" class="img-fluid figure-img" width="672"></p>
</figure>
</div>
</div>
</div>
<p>Since the second problem requires a prediction be made using behavior and beliefs, we use all 13 variables in the data set belonging to these two categories. </p>
</section>
<section id="methods" class="level1">
<h1>Methods</h1>
<p>For the first problem, we transformed our response variable to stabilize the variance however, we perform regression using the Weight Least Squares (WLS) method to ensure that our model is robust. We start by first fitting an Ordinary Least Squares (OLS) regression represented by <span class="math inline">\(\text{Eq}\; (1)\)</span>:</p>
<p><span class="math display">\[\begin{align}
\begin{split}
E(\sqrt{cli}) &amp;= {\beta}_0 + {\beta}_1inperson\_school\_fulltime + {\beta}_2inperson\_school\_parttime  \\
&amp;+ {\beta}_3covid\_vaccinated\_or\_accept + {\beta}_4wearing\_mask + {\beta}_5large\_event\_1d
\end{split}
\end{align}\]</span></p>
<p>We use the fitted values obtained from the OLS model as weights and use them for the weighted regression. Keeping in view our end goal is to quantify the effect of schooling variables on <code>cli</code>, we conduct the following test when fitting the regression model:</p>
<p><span class="math display">\[H_0:\quad \beta_1 = \beta_2 = 0\]</span></p>
<p><span class="math display">\[H_A:\quad \beta_1 \neq 0 \quad \text{or} \quad \beta_2 \neq 0\]</span></p>
<p>Under the null hypotheses <span class="math inline">\(H_0\)</span>, the coefficients of both the schooling variables <span class="math inline">\(\beta_1\)</span> and <span class="math inline">\(\beta_2\)</span> are <span class="math inline">\(0\)</span> i.e.&nbsp;in-person schooling does not have any effect on <code>cli</code>. We will reject the null if we get a <span class="math inline">\(p-value \leq \alpha = 0.05\)</span> which is our significance level. The results of our regression are summarized in Table 1. </p>
<div class="cell">
<div class="cell-output-display">
<div id="gzjqvvzlur" style="padding-left:0px;padding-right:0px;padding-top:10px;padding-bottom:10px;overflow-x:auto;overflow-y:auto;width:auto;height:auto;">
<style>#gzjqvvzlur table {
  font-family: system-ui, 'Segoe UI', Roboto, Helvetica, Arial, sans-serif, 'Apple Color Emoji', 'Segoe UI Emoji', 'Segoe UI Symbol', 'Noto Color Emoji';
  -webkit-font-smoothing: antialiased;
  -moz-osx-font-smoothing: grayscale;
}

#gzjqvvzlur thead, #gzjqvvzlur tbody, #gzjqvvzlur tfoot, #gzjqvvzlur tr, #gzjqvvzlur td, #gzjqvvzlur th {
  border-style: none;
}

#gzjqvvzlur p {
  margin: 0;
  padding: 0;
}

#gzjqvvzlur .gt_table {
  display: table;
  border-collapse: collapse;
  line-height: normal;
  margin-left: auto;
  margin-right: auto;
  color: #333333;
  font-size: 12px;
  font-weight: normal;
  font-style: normal;
  background-color: #FFFFFF;
  width: auto;
  border-top-style: solid;
  border-top-width: 2px;
  border-top-color: #A8A8A8;
  border-right-style: none;
  border-right-width: 2px;
  border-right-color: #D3D3D3;
  border-bottom-style: solid;
  border-bottom-width: 2px;
  border-bottom-color: #A8A8A8;
  border-left-style: none;
  border-left-width: 2px;
  border-left-color: #D3D3D3;
}

#gzjqvvzlur .gt_caption {
  padding-top: 4px;
  padding-bottom: 4px;
}

#gzjqvvzlur .gt_title {
  color: #FFFFFF;
  font-size: 125%;
  font-weight: initial;
  padding-top: 4px;
  padding-bottom: 4px;
  padding-left: 5px;
  padding-right: 5px;
  border-bottom-color: #FFFFFF;
  border-bottom-width: 0;
}

#gzjqvvzlur .gt_subtitle {
  color: #FFFFFF;
  font-size: 85%;
  font-weight: initial;
  padding-top: 3px;
  padding-bottom: 5px;
  padding-left: 5px;
  padding-right: 5px;
  border-top-color: #FFFFFF;
  border-top-width: 0;
}

#gzjqvvzlur .gt_heading {
  background-color: #4682B4;
  text-align: center;
  border-bottom-color: #FFFFFF;
  border-left-style: none;
  border-left-width: 1px;
  border-left-color: #D3D3D3;
  border-right-style: none;
  border-right-width: 1px;
  border-right-color: #D3D3D3;
}

#gzjqvvzlur .gt_bottom_border {
  border-bottom-style: solid;
  border-bottom-width: 2px;
  border-bottom-color: #D3D3D3;
}

#gzjqvvzlur .gt_col_headings {
  border-top-style: solid;
  border-top-width: 2px;
  border-top-color: #D3D3D3;
  border-bottom-style: solid;
  border-bottom-width: 2px;
  border-bottom-color: #D3D3D3;
  border-left-style: none;
  border-left-width: 1px;
  border-left-color: #D3D3D3;
  border-right-style: none;
  border-right-width: 1px;
  border-right-color: #D3D3D3;
}

#gzjqvvzlur .gt_col_heading {
  color: #FFFFFF;
  background-color: #FF6347;
  font-size: 100%;
  font-weight: normal;
  text-transform: inherit;
  border-left-style: none;
  border-left-width: 1px;
  border-left-color: #D3D3D3;
  border-right-style: none;
  border-right-width: 1px;
  border-right-color: #D3D3D3;
  vertical-align: bottom;
  padding-top: 5px;
  padding-bottom: 6px;
  padding-left: 5px;
  padding-right: 5px;
  overflow-x: hidden;
}

#gzjqvvzlur .gt_column_spanner_outer {
  color: #FFFFFF;
  background-color: #FF6347;
  font-size: 100%;
  font-weight: normal;
  text-transform: inherit;
  padding-top: 0;
  padding-bottom: 0;
  padding-left: 4px;
  padding-right: 4px;
}

#gzjqvvzlur .gt_column_spanner_outer:first-child {
  padding-left: 0;
}

#gzjqvvzlur .gt_column_spanner_outer:last-child {
  padding-right: 0;
}

#gzjqvvzlur .gt_column_spanner {
  border-bottom-style: solid;
  border-bottom-width: 2px;
  border-bottom-color: #D3D3D3;
  vertical-align: bottom;
  padding-top: 5px;
  padding-bottom: 5px;
  overflow-x: hidden;
  display: inline-block;
  width: 100%;
}

#gzjqvvzlur .gt_spanner_row {
  border-bottom-style: hidden;
}

#gzjqvvzlur .gt_group_heading {
  padding-top: 8px;
  padding-bottom: 8px;
  padding-left: 5px;
  padding-right: 5px;
  color: #333333;
  background-color: #FFFFFF;
  font-size: 100%;
  font-weight: initial;
  text-transform: inherit;
  border-top-style: solid;
  border-top-width: 2px;
  border-top-color: #D3D3D3;
  border-bottom-style: solid;
  border-bottom-width: 2px;
  border-bottom-color: #D3D3D3;
  border-left-style: none;
  border-left-width: 1px;
  border-left-color: #D3D3D3;
  border-right-style: none;
  border-right-width: 1px;
  border-right-color: #D3D3D3;
  vertical-align: middle;
  text-align: left;
}

#gzjqvvzlur .gt_empty_group_heading {
  padding: 0.5px;
  color: #333333;
  background-color: #FFFFFF;
  font-size: 100%;
  font-weight: initial;
  border-top-style: solid;
  border-top-width: 2px;
  border-top-color: #D3D3D3;
  border-bottom-style: solid;
  border-bottom-width: 2px;
  border-bottom-color: #D3D3D3;
  vertical-align: middle;
}

#gzjqvvzlur .gt_from_md > :first-child {
  margin-top: 0;
}

#gzjqvvzlur .gt_from_md > :last-child {
  margin-bottom: 0;
}

#gzjqvvzlur .gt_row {
  padding-top: 8px;
  padding-bottom: 8px;
  padding-left: 5px;
  padding-right: 5px;
  margin: 10px;
  border-top-style: solid;
  border-top-width: 1px;
  border-top-color: #D3D3D3;
  border-left-style: none;
  border-left-width: 1px;
  border-left-color: #D3D3D3;
  border-right-style: none;
  border-right-width: 1px;
  border-right-color: #D3D3D3;
  vertical-align: middle;
  overflow-x: hidden;
}

#gzjqvvzlur .gt_stub {
  color: #333333;
  background-color: #FFFFFF;
  font-size: 100%;
  font-weight: initial;
  text-transform: inherit;
  border-right-style: solid;
  border-right-width: 2px;
  border-right-color: #D3D3D3;
  padding-left: 5px;
  padding-right: 5px;
}

#gzjqvvzlur .gt_stub_row_group {
  color: #333333;
  background-color: #FFFFFF;
  font-size: 100%;
  font-weight: initial;
  text-transform: inherit;
  border-right-style: solid;
  border-right-width: 2px;
  border-right-color: #D3D3D3;
  padding-left: 5px;
  padding-right: 5px;
  vertical-align: top;
}

#gzjqvvzlur .gt_row_group_first td {
  border-top-width: 2px;
}

#gzjqvvzlur .gt_row_group_first th {
  border-top-width: 2px;
}

#gzjqvvzlur .gt_summary_row {
  color: #333333;
  background-color: #FFFFFF;
  text-transform: inherit;
  padding-top: 8px;
  padding-bottom: 8px;
  padding-left: 5px;
  padding-right: 5px;
}

#gzjqvvzlur .gt_first_summary_row {
  border-top-style: solid;
  border-top-color: #D3D3D3;
}

#gzjqvvzlur .gt_first_summary_row.thick {
  border-top-width: 2px;
}

#gzjqvvzlur .gt_last_summary_row {
  padding-top: 8px;
  padding-bottom: 8px;
  padding-left: 5px;
  padding-right: 5px;
  border-bottom-style: solid;
  border-bottom-width: 2px;
  border-bottom-color: #D3D3D3;
}

#gzjqvvzlur .gt_grand_summary_row {
  color: #333333;
  background-color: #FFFFFF;
  text-transform: inherit;
  padding-top: 8px;
  padding-bottom: 8px;
  padding-left: 5px;
  padding-right: 5px;
}

#gzjqvvzlur .gt_first_grand_summary_row {
  padding-top: 8px;
  padding-bottom: 8px;
  padding-left: 5px;
  padding-right: 5px;
  border-top-style: double;
  border-top-width: 6px;
  border-top-color: #D3D3D3;
}

#gzjqvvzlur .gt_last_grand_summary_row_top {
  padding-top: 8px;
  padding-bottom: 8px;
  padding-left: 5px;
  padding-right: 5px;
  border-bottom-style: double;
  border-bottom-width: 6px;
  border-bottom-color: #D3D3D3;
}

#gzjqvvzlur .gt_striped {
  background-color: rgba(128, 128, 128, 0.05);
}

#gzjqvvzlur .gt_table_body {
  border-top-style: solid;
  border-top-width: 2px;
  border-top-color: #D3D3D3;
  border-bottom-style: solid;
  border-bottom-width: 2px;
  border-bottom-color: #D3D3D3;
}

#gzjqvvzlur .gt_footnotes {
  color: #333333;
  background-color: #FFFFFF;
  border-bottom-style: none;
  border-bottom-width: 2px;
  border-bottom-color: #D3D3D3;
  border-left-style: none;
  border-left-width: 2px;
  border-left-color: #D3D3D3;
  border-right-style: none;
  border-right-width: 2px;
  border-right-color: #D3D3D3;
}

#gzjqvvzlur .gt_footnote {
  margin: 0px;
  font-size: 90%;
  padding-top: 4px;
  padding-bottom: 4px;
  padding-left: 5px;
  padding-right: 5px;
}

#gzjqvvzlur .gt_sourcenotes {
  color: #333333;
  background-color: #FFFFFF;
  border-bottom-style: none;
  border-bottom-width: 2px;
  border-bottom-color: #D3D3D3;
  border-left-style: none;
  border-left-width: 2px;
  border-left-color: #D3D3D3;
  border-right-style: none;
  border-right-width: 2px;
  border-right-color: #D3D3D3;
}

#gzjqvvzlur .gt_sourcenote {
  font-size: 90%;
  padding-top: 4px;
  padding-bottom: 4px;
  padding-left: 5px;
  padding-right: 5px;
}

#gzjqvvzlur .gt_left {
  text-align: left;
}

#gzjqvvzlur .gt_center {
  text-align: center;
}

#gzjqvvzlur .gt_right {
  text-align: right;
  font-variant-numeric: tabular-nums;
}

#gzjqvvzlur .gt_font_normal {
  font-weight: normal;
}

#gzjqvvzlur .gt_font_bold {
  font-weight: bold;
}

#gzjqvvzlur .gt_font_italic {
  font-style: italic;
}

#gzjqvvzlur .gt_super {
  font-size: 65%;
}

#gzjqvvzlur .gt_footnote_marks {
  font-size: 75%;
  vertical-align: 0.4em;
  position: initial;
}

#gzjqvvzlur .gt_asterisk {
  font-size: 100%;
  vertical-align: 0;
}

#gzjqvvzlur .gt_indent_1 {
  text-indent: 5px;
}

#gzjqvvzlur .gt_indent_2 {
  text-indent: 10px;
}

#gzjqvvzlur .gt_indent_3 {
  text-indent: 15px;
}

#gzjqvvzlur .gt_indent_4 {
  text-indent: 20px;
}

#gzjqvvzlur .gt_indent_5 {
  text-indent: 25px;
}

#gzjqvvzlur .katex-display {
  display: inline-flex !important;
  margin-bottom: 0.75em !important;
}

#gzjqvvzlur div.Reactable > div.rt-table > div.rt-thead > div.rt-tr.rt-tr-group-header > div.rt-th-group:after {
  height: 0px !important;
}
</style>

<table class="gt_table caption-top table table-sm table-striped small" data-quarto-postprocess="true" data-quarto-disable-processing="false" data-quarto-bootstrap="false">
<thead>
<tr class="header gt_heading">
<th colspan="5" class="gt_heading gt_title gt_font_normal gt_bottom_border"><p><strong>Table 1</strong>: WLS Regression Results</p></th>
</tr>
<tr class="odd gt_col_headings">
<th id="Variable" class="gt_col_heading gt_columns_bottom_border gt_left" data-quarto-table-cell-role="th" scope="col">Variable</th>
<th id="Estimate" class="gt_col_heading gt_columns_bottom_border gt_right" data-quarto-table-cell-role="th" scope="col">Estimate</th>
<th id="Std Error" class="gt_col_heading gt_columns_bottom_border gt_right" data-quarto-table-cell-role="th" scope="col">Std Error</th>
<th id="t-value" class="gt_col_heading gt_columns_bottom_border gt_right" data-quarto-table-cell-role="th" scope="col">t-value</th>
<th id="p-value" class="gt_col_heading gt_columns_bottom_border gt_right" data-quarto-table-cell-role="th" scope="col">p-value</th>
</tr>
</thead>
<tbody class="gt_table_body">
<tr class="odd">
<td class="gt_row gt_left" headers="Term">Intercept</td>
<td class="gt_row gt_right" headers="Estimate">2.969</td>
<td class="gt_row gt_right" headers="StdError">2.065</td>
<td class="gt_row gt_right" headers="tValue">1.438</td>
<td class="gt_row gt_right" headers="pValue">0.1562</td>
</tr>
<tr class="even">
<td class="gt_row gt_left" headers="Term">Inperson School Fulltime</td>
<td class="gt_row gt_right" headers="Estimate">−0.004</td>
<td class="gt_row gt_right" headers="StdError">0.002</td>
<td class="gt_row gt_right" headers="tValue">−1.868</td>
<td class="gt_row gt_right" headers="pValue">0.0671</td>
</tr>
<tr class="odd">
<td class="gt_row gt_left" headers="Term">Inperson School Parttime</td>
<td class="gt_row gt_right" headers="Estimate">−0.001</td>
<td class="gt_row gt_right" headers="StdError">0.002</td>
<td class="gt_row gt_right" headers="tValue">−0.809</td>
<td class="gt_row gt_right" headers="pValue">0.4219</td>
</tr>
<tr class="even">
<td class="gt_row gt_left" headers="Term">Covid Vaccinated Or Accept</td>
<td class="gt_row gt_right" headers="Estimate">−0.012</td>
<td class="gt_row gt_right" headers="StdError">0.007</td>
<td class="gt_row gt_right" headers="tValue">−1.839</td>
<td class="gt_row gt_right" headers="pValue">0.0713</td>
</tr>
<tr class="odd">
<td class="gt_row gt_left" headers="Term">Wearing Mask</td>
<td class="gt_row gt_right" headers="Estimate">−0.011</td>
<td class="gt_row gt_right" headers="StdError">0.021</td>
<td class="gt_row gt_right" headers="tValue">−0.527</td>
<td class="gt_row gt_right" headers="pValue">0.6000</td>
</tr>
<tr class="even">
<td class="gt_row gt_left" headers="Term">Large Event (Last Day)</td>
<td class="gt_row gt_right" headers="Estimate">0.020</td>
<td class="gt_row gt_right" headers="StdError">0.020</td>
<td class="gt_row gt_right" headers="tValue">1.003</td>
<td class="gt_row gt_right" headers="pValue">0.3200</td>
</tr>
<tr class="odd">
<td class="gt_row gt_left" headers="Term">Residual Standard Error</td>
<td class="gt_row gt_right" headers="Estimate">0.203</td>
<td class="gt_row gt_right" headers="StdError">NA</td>
<td class="gt_row gt_right" headers="tValue">NA</td>
<td class="gt_row gt_right" headers="pValue">NA</td>
</tr>
<tr class="even">
<td class="gt_row gt_left" headers="Term">Degrees of Freedom</td>
<td class="gt_row gt_right" headers="Estimate">55.000</td>
<td class="gt_row gt_right" headers="StdError">NA</td>
<td class="gt_row gt_right" headers="tValue">NA</td>
<td class="gt_row gt_right" headers="pValue">NA</td>
</tr>
<tr class="odd">
<td class="gt_row gt_left" headers="Term">Multiple R²</td>
<td class="gt_row gt_right" headers="Estimate">0.243</td>
<td class="gt_row gt_right" headers="StdError">NA</td>
<td class="gt_row gt_right" headers="tValue">NA</td>
<td class="gt_row gt_right" headers="pValue">NA</td>
</tr>
<tr class="even">
<td class="gt_row gt_left" headers="Term">Adjusted R²</td>
<td class="gt_row gt_right" headers="Estimate">0.174</td>
<td class="gt_row gt_right" headers="StdError">NA</td>
<td class="gt_row gt_right" headers="tValue">NA</td>
<td class="gt_row gt_right" headers="pValue">NA</td>
</tr>
<tr class="odd">
<td class="gt_row gt_left" headers="Term">F-statistic</td>
<td class="gt_row gt_right" headers="Estimate">3.528</td>
<td class="gt_row gt_right" headers="StdError">NA</td>
<td class="gt_row gt_right" headers="tValue">NA</td>
<td class="gt_row gt_right" headers="pValue">NA</td>
</tr>
</tbody>
</table>

</div>
</div>
</div>
<p>To evaluate the goodness-of-fit of our model, we use the diagnostic plots displayed in Figure 5.</p>
<div class="cell">
<div class="cell-output-display">
<div>
<figure class="figure">
<p><img src="covidcast_files/figure-html/unnamed-chunk-10-1.png" class="img-fluid figure-img" width="768"></p>
</figure>
</div>
</div>
</div>
<p>For the second problem, we split the data into two sets based on the period it was collected in. We use the data from the first period to find the optimal value of the tuning parameter <span class="math inline">\(\lambda\)</span> using <span class="math inline">\(k=10\)</span>-fold cross validation. This optimal value gives us the model with the lowest test mean squared error (MSE), as displayed by the red dot on the bottom left of Figure 6.</p>
<div class="cell">
<div class="cell-output-display">
<div>
<figure class="figure">
<p><img src="covidcast_files/figure-html/unnamed-chunk-13-1.png" class="img-fluid figure-img" width="672"></p>
</figure>
</div>
</div>
</div>
<p>A lasso model is then used to predict the values of <code>covid_vaccinated_or_accept</code> in the second period using the optimal value of <span class="math inline">\(\lambda\)</span>. We prefer the lasso over ridge regression because it forces the coefficients of the potentially unimportant covariates to <span class="math inline">\(0\)</span> thereby doing both model and variable selection for us. The results of the lasso model are summarized in Table 2. </p>
<div class="cell">
<div class="cell-output-display">
<div id="ydgabwknrs" style="padding-left:0px;padding-right:0px;padding-top:10px;padding-bottom:10px;overflow-x:auto;overflow-y:auto;width:auto;height:auto;">
<style>#ydgabwknrs table {
  font-family: Arial, system-ui, 'Segoe UI', Roboto, Helvetica, sans-serif, 'Apple Color Emoji', 'Segoe UI Emoji', 'Segoe UI Symbol', 'Noto Color Emoji';
  -webkit-font-smoothing: antialiased;
  -moz-osx-font-smoothing: grayscale;
}

#ydgabwknrs thead, #ydgabwknrs tbody, #ydgabwknrs tfoot, #ydgabwknrs tr, #ydgabwknrs td, #ydgabwknrs th {
  border-style: none;
}

#ydgabwknrs p {
  margin: 0;
  padding: 0;
}

#ydgabwknrs .gt_table {
  display: table;
  border-collapse: collapse;
  line-height: normal;
  margin-left: auto;
  margin-right: auto;
  color: #333333;
  font-size: 16px;
  font-weight: normal;
  font-style: normal;
  background-color: #FFFFFF;
  width: auto;
  border-top-style: solid;
  border-top-width: 2px;
  border-top-color: #A8A8A8;
  border-right-style: none;
  border-right-width: 2px;
  border-right-color: #D3D3D3;
  border-bottom-style: solid;
  border-bottom-width: 2px;
  border-bottom-color: #A8A8A8;
  border-left-style: none;
  border-left-width: 2px;
  border-left-color: #D3D3D3;
}

#ydgabwknrs .gt_caption {
  padding-top: 4px;
  padding-bottom: 4px;
}

#ydgabwknrs .gt_title {
  color: #FFFFFF;
  font-size: 125%;
  font-weight: initial;
  padding-top: 4px;
  padding-bottom: 4px;
  padding-left: 5px;
  padding-right: 5px;
  border-bottom-color: #FFFFFF;
  border-bottom-width: 0;
}

#ydgabwknrs .gt_subtitle {
  color: #FFFFFF;
  font-size: 85%;
  font-weight: initial;
  padding-top: 3px;
  padding-bottom: 5px;
  padding-left: 5px;
  padding-right: 5px;
  border-top-color: #FFFFFF;
  border-top-width: 0;
}

#ydgabwknrs .gt_heading {
  background-color: #4682B4;
  text-align: center;
  border-bottom-color: #FFFFFF;
  border-left-style: none;
  border-left-width: 1px;
  border-left-color: #D3D3D3;
  border-right-style: none;
  border-right-width: 1px;
  border-right-color: #D3D3D3;
}

#ydgabwknrs .gt_bottom_border {
  border-bottom-style: solid;
  border-bottom-width: 2px;
  border-bottom-color: #D3D3D3;
}

#ydgabwknrs .gt_col_headings {
  border-top-style: solid;
  border-top-width: 2px;
  border-top-color: #D3D3D3;
  border-bottom-style: solid;
  border-bottom-width: 2px;
  border-bottom-color: #D3D3D3;
  border-left-style: none;
  border-left-width: 1px;
  border-left-color: #D3D3D3;
  border-right-style: none;
  border-right-width: 1px;
  border-right-color: #D3D3D3;
}

#ydgabwknrs .gt_col_heading {
  color: #FFFFFF;
  background-color: #FF6347;
  font-size: 100%;
  font-weight: normal;
  text-transform: inherit;
  border-left-style: none;
  border-left-width: 1px;
  border-left-color: #D3D3D3;
  border-right-style: none;
  border-right-width: 1px;
  border-right-color: #D3D3D3;
  vertical-align: bottom;
  padding-top: 5px;
  padding-bottom: 6px;
  padding-left: 5px;
  padding-right: 5px;
  overflow-x: hidden;
}

#ydgabwknrs .gt_column_spanner_outer {
  color: #FFFFFF;
  background-color: #FF6347;
  font-size: 100%;
  font-weight: normal;
  text-transform: inherit;
  padding-top: 0;
  padding-bottom: 0;
  padding-left: 4px;
  padding-right: 4px;
}

#ydgabwknrs .gt_column_spanner_outer:first-child {
  padding-left: 0;
}

#ydgabwknrs .gt_column_spanner_outer:last-child {
  padding-right: 0;
}

#ydgabwknrs .gt_column_spanner {
  border-bottom-style: solid;
  border-bottom-width: 2px;
  border-bottom-color: #D3D3D3;
  vertical-align: bottom;
  padding-top: 5px;
  padding-bottom: 5px;
  overflow-x: hidden;
  display: inline-block;
  width: 100%;
}

#ydgabwknrs .gt_spanner_row {
  border-bottom-style: hidden;
}

#ydgabwknrs .gt_group_heading {
  padding-top: 8px;
  padding-bottom: 8px;
  padding-left: 5px;
  padding-right: 5px;
  color: #333333;
  background-color: #FFFFFF;
  font-size: 100%;
  font-weight: initial;
  text-transform: inherit;
  border-top-style: solid;
  border-top-width: 2px;
  border-top-color: #D3D3D3;
  border-bottom-style: solid;
  border-bottom-width: 2px;
  border-bottom-color: #D3D3D3;
  border-left-style: none;
  border-left-width: 1px;
  border-left-color: #D3D3D3;
  border-right-style: none;
  border-right-width: 1px;
  border-right-color: #D3D3D3;
  vertical-align: middle;
  text-align: left;
}

#ydgabwknrs .gt_empty_group_heading {
  padding: 0.5px;
  color: #333333;
  background-color: #FFFFFF;
  font-size: 100%;
  font-weight: initial;
  border-top-style: solid;
  border-top-width: 2px;
  border-top-color: #D3D3D3;
  border-bottom-style: solid;
  border-bottom-width: 2px;
  border-bottom-color: #D3D3D3;
  vertical-align: middle;
}

#ydgabwknrs .gt_from_md > :first-child {
  margin-top: 0;
}

#ydgabwknrs .gt_from_md > :last-child {
  margin-bottom: 0;
}

#ydgabwknrs .gt_row {
  padding-top: 8px;
  padding-bottom: 8px;
  padding-left: 5px;
  padding-right: 5px;
  margin: 10px;
  border-top-style: solid;
  border-top-width: 1px;
  border-top-color: #D3D3D3;
  border-left-style: none;
  border-left-width: 1px;
  border-left-color: #D3D3D3;
  border-right-style: none;
  border-right-width: 1px;
  border-right-color: #D3D3D3;
  vertical-align: middle;
  overflow-x: hidden;
}

#ydgabwknrs .gt_stub {
  color: #333333;
  background-color: #FFFFFF;
  font-size: 100%;
  font-weight: initial;
  text-transform: inherit;
  border-right-style: solid;
  border-right-width: 2px;
  border-right-color: #D3D3D3;
  padding-left: 5px;
  padding-right: 5px;
}

#ydgabwknrs .gt_stub_row_group {
  color: #333333;
  background-color: #FFFFFF;
  font-size: 100%;
  font-weight: initial;
  text-transform: inherit;
  border-right-style: solid;
  border-right-width: 2px;
  border-right-color: #D3D3D3;
  padding-left: 5px;
  padding-right: 5px;
  vertical-align: top;
}

#ydgabwknrs .gt_row_group_first td {
  border-top-width: 2px;
}

#ydgabwknrs .gt_row_group_first th {
  border-top-width: 2px;
}

#ydgabwknrs .gt_summary_row {
  color: #333333;
  background-color: #FFFFFF;
  text-transform: inherit;
  padding-top: 8px;
  padding-bottom: 8px;
  padding-left: 5px;
  padding-right: 5px;
}

#ydgabwknrs .gt_first_summary_row {
  border-top-style: solid;
  border-top-color: #D3D3D3;
}

#ydgabwknrs .gt_first_summary_row.thick {
  border-top-width: 2px;
}

#ydgabwknrs .gt_last_summary_row {
  padding-top: 8px;
  padding-bottom: 8px;
  padding-left: 5px;
  padding-right: 5px;
  border-bottom-style: solid;
  border-bottom-width: 2px;
  border-bottom-color: #D3D3D3;
}

#ydgabwknrs .gt_grand_summary_row {
  color: #333333;
  background-color: #FFFFFF;
  text-transform: inherit;
  padding-top: 8px;
  padding-bottom: 8px;
  padding-left: 5px;
  padding-right: 5px;
}

#ydgabwknrs .gt_first_grand_summary_row {
  padding-top: 8px;
  padding-bottom: 8px;
  padding-left: 5px;
  padding-right: 5px;
  border-top-style: double;
  border-top-width: 6px;
  border-top-color: #D3D3D3;
}

#ydgabwknrs .gt_last_grand_summary_row_top {
  padding-top: 8px;
  padding-bottom: 8px;
  padding-left: 5px;
  padding-right: 5px;
  border-bottom-style: double;
  border-bottom-width: 6px;
  border-bottom-color: #D3D3D3;
}

#ydgabwknrs .gt_striped {
  background-color: rgba(128, 128, 128, 0.05);
}

#ydgabwknrs .gt_table_body {
  border-top-style: solid;
  border-top-width: 2px;
  border-top-color: #D3D3D3;
  border-bottom-style: solid;
  border-bottom-width: 2px;
  border-bottom-color: #D3D3D3;
}

#ydgabwknrs .gt_footnotes {
  color: #333333;
  background-color: #FFFFFF;
  border-bottom-style: none;
  border-bottom-width: 2px;
  border-bottom-color: #D3D3D3;
  border-left-style: none;
  border-left-width: 2px;
  border-left-color: #D3D3D3;
  border-right-style: none;
  border-right-width: 2px;
  border-right-color: #D3D3D3;
}

#ydgabwknrs .gt_footnote {
  margin: 0px;
  font-size: 90%;
  padding-top: 4px;
  padding-bottom: 4px;
  padding-left: 5px;
  padding-right: 5px;
}

#ydgabwknrs .gt_sourcenotes {
  color: #333333;
  background-color: #FFFFFF;
  border-bottom-style: none;
  border-bottom-width: 2px;
  border-bottom-color: #D3D3D3;
  border-left-style: none;
  border-left-width: 2px;
  border-left-color: #D3D3D3;
  border-right-style: none;
  border-right-width: 2px;
  border-right-color: #D3D3D3;
}

#ydgabwknrs .gt_sourcenote {
  font-size: 90%;
  padding-top: 4px;
  padding-bottom: 4px;
  padding-left: 5px;
  padding-right: 5px;
}

#ydgabwknrs .gt_left {
  text-align: left;
}

#ydgabwknrs .gt_center {
  text-align: center;
}

#ydgabwknrs .gt_right {
  text-align: right;
  font-variant-numeric: tabular-nums;
}

#ydgabwknrs .gt_font_normal {
  font-weight: normal;
}

#ydgabwknrs .gt_font_bold {
  font-weight: bold;
}

#ydgabwknrs .gt_font_italic {
  font-style: italic;
}

#ydgabwknrs .gt_super {
  font-size: 65%;
}

#ydgabwknrs .gt_footnote_marks {
  font-size: 75%;
  vertical-align: 0.4em;
  position: initial;
}

#ydgabwknrs .gt_asterisk {
  font-size: 100%;
  vertical-align: 0;
}

#ydgabwknrs .gt_indent_1 {
  text-indent: 5px;
}

#ydgabwknrs .gt_indent_2 {
  text-indent: 10px;
}

#ydgabwknrs .gt_indent_3 {
  text-indent: 15px;
}

#ydgabwknrs .gt_indent_4 {
  text-indent: 20px;
}

#ydgabwknrs .gt_indent_5 {
  text-indent: 25px;
}

#ydgabwknrs .katex-display {
  display: inline-flex !important;
  margin-bottom: 0.75em !important;
}

#ydgabwknrs div.Reactable > div.rt-table > div.rt-thead > div.rt-tr.rt-tr-group-header > div.rt-th-group:after {
  height: 0px !important;
}
</style>

<table class="gt_table caption-top table table-sm table-striped small" data-quarto-postprocess="true" data-quarto-disable-processing="false" data-quarto-bootstrap="false">
<thead>
<tr class="header gt_heading">
<th colspan="4" class="gt_heading gt_title gt_font_normal" style="font-size: 14px"><p><strong>Table 2</strong>: LASSO Regression Results</p></th>
</tr>
<tr class="odd gt_heading">
<th colspan="4" class="gt_heading gt_subtitle gt_font_normal gt_bottom_border" style="font-size: 12px">Predictors of COVID-19 Vaccination Acceptance</th>
</tr>
<tr class="header gt_col_headings">
<th id="Predictor" class="gt_col_heading gt_columns_bottom_border gt_left" data-quarto-table-cell-role="th" style="font-weight: bold" scope="col">Predictor</th>
<th id="Coefficient" class="gt_col_heading gt_columns_bottom_border gt_right" data-quarto-table-cell-role="th" style="font-weight: bold" scope="col">Coefficient</th>
<th id="Predictor" class="gt_col_heading gt_columns_bottom_border gt_left" data-quarto-table-cell-role="th" style="font-weight: bold" scope="col">Predictor</th>
<th id="Coefficient" class="gt_col_heading gt_columns_bottom_border gt_right" data-quarto-table-cell-role="th" style="font-weight: bold" scope="col">Coefficient</th>
</tr>
</thead>
<tbody class="gt_table_body">
<tr class="odd">
<td class="gt_row gt_left" headers="Variable1">Intercept</td>
<td class="gt_row gt_right" headers="Coefficient1" style="border-right-width: 1px; border-right-style: solid; border-right-color: gray10">27.6957</td>
<td class="gt_row gt_left" headers="Variable2">Wearing Mask</td>
<td class="gt_row gt_right" headers="Coefficient2">0.2155</td>
</tr>
<tr class="even">
<td class="gt_row gt_left" headers="Variable1">Vaccine Likely Friends</td>
<td class="gt_row gt_right" headers="Coefficient1" style="border-right-width: 1px; border-right-style: solid; border-right-color: gray10">0.0696</td>
<td class="gt_row gt_left" headers="Variable2">Others Masked</td>
<td class="gt_row gt_right" headers="Coefficient2">0.0914</td>
</tr>
<tr class="odd">
<td class="gt_row gt_left" headers="Variable1">Vaccine Likely WHO</td>
<td class="gt_row gt_right" headers="Coefficient1" style="border-right-width: 1px; border-right-style: solid; border-right-color: gray10">0.3143</td>
<td class="gt_row gt_left" headers="Variable2">Public Transit (Last Day)</td>
<td class="gt_row gt_right" headers="Coefficient2">−0.1239</td>
</tr>
<tr class="even">
<td class="gt_row gt_left" headers="Variable1">Vaccine Likely Government Health</td>
<td class="gt_row gt_right" headers="Coefficient1" style="border-right-width: 1px; border-right-style: solid; border-right-color: gray10">0.3734</td>
<td class="gt_row gt_left" headers="Variable2">Work Outside Home (Last Day)</td>
<td class="gt_row gt_right" headers="Coefficient2">−0.0137</td>
</tr>
<tr class="odd">
<td class="gt_row gt_left" headers="Variable1">Vaccine Likely Politicians</td>
<td class="gt_row gt_right" headers="Coefficient1" style="border-right-width: 1px; border-right-style: solid; border-right-color: gray10">−0.2893</td>
<td class="gt_row gt_left" headers="Variable2">Large Event (Last Day)</td>
<td class="gt_row gt_right" headers="Coefficient2">−0.1079</td>
</tr>
</tbody><tfoot class="gt_sourcenotes">
<tr class="even">
<td colspan="4" class="gt_sourcenote"><p>Performance Metrics: RMSE: 3.976, MSE: 15.812 (SE: 1.519), Best λ: 0.139</p></td>
</tr>
</tfoot>

</table>

</div>
</div>
</div>
<div style="page-break-after: always;"></div>
</section>
<section id="discussion-and-results" class="level1">
<h1>Discussion and Results</h1>
<p>Before discussing our findings in detail, it is pertinent to highlight that the results of this study must be implemented keeping in mind that they were obtained using survey data, which is prone to both:</p>
<ul>
<li>Response Bias: indicating that certain types of people are more likely to respond than others, people may answer what they think is socially acceptable, and people may have inaccurate memory of past events</li>
</ul>
<p>and</p>
<ul>
<li>Sampling Bias: indicating that the survey does not reach the entire target population, there may be systematic differences between respondents and non-respondents, and our sample may not be representative of the entire population</li>
</ul>
<section id="problem-1" class="level2">
<h2 class="anchored" data-anchor-id="problem-1">Problem 1</h2>
<p>The results summarized in Table 1 show that the <span class="math inline">\(p-values\)</span> associated with the coefficients of the two schooling covariates of concern <code>inperson_school_fulltime</code> and <code>inperson_school_parttime</code> are <span class="math inline">\(&gt;\;0.05\)</span> which means we fail to reject the null hypothesis <span class="math inline">\(H_0\)</span> under the <span class="math inline">\(5\%\)</span> significance level and conclude that in-person schooling does not have a statistically significant relationship with <span class="math inline">\(\sqrt{\text{cli}}\)</span> and hence <code>cli</code>. The validity of our model is supported by the diagnostic plots displayed in Figure 5. Plot D shows all studentized residuals behaving within the limits shown by the dotted red lines. Similarly, the Q-Q plot displayed in Plot E shows all residuals are within the confidence band, a strong sign of normality, except a single point which can be attributed to randomness. Plot F proves that all points have low Cook’s distance values indicating there are no high-leverage points present in our data.</p>
<p><strong>Given these results, our conclusion is that there is no meaningful relationship between in-person schooling and COVID health outcomes.</strong></p>
</section>
<section id="problem-2" class="level2">
<h2 class="anchored" data-anchor-id="problem-2">Problem 2</h2>
<p>Table 2 summarizes the values of the coefficients for all predictors whereby we can use <span class="math inline">\(\text{Eq} \; (2)\)</span> to predict the values of <code>covid_vaccinated_or_accept</code>, abbreviated as <span class="math inline">\(Y\)</span>, for the second period:</p>
<p><span class="math display">\[\begin{align}
\begin{split}
E(Y) &amp;= \beta_0 + \beta_1vaccine\_likely\_friends + \beta_2vaccine\_likely\_who  \\
&amp;+ \beta_3vaccine\_likely\_govt\_health + \beta_4vaccine\_likely\_politicians \\
&amp;+ \beta_5wearing\_mask + \beta_6others\_masked + \beta_7public\_transit\_1d \\
&amp;+ \beta_8work\_outside\_home\_1d + \beta_9large\_event\_1d
\end{split}
\end{align}\]</span></p>
<p>As mentioned previously in the Methods section, the lasso method forces some coefficients to be zero and that is exactly what our model has done to the the coefficients of <code>worried_become_ill</code>, <code>shop_1d</code>, <code>restaurant_1d</code>, and <code>spent_time_1d</code>; the reason why there coefficients are not mentioned in Table 2. The model performance metrics, listed in the footnotes of Table 2 measure the accuracy of our model. Our estimate of the test MSE is <span class="math inline">\(15.812 \pm 1.519\)</span> at the <span class="math inline">\(95\%\)</span> confidence level, and when square rooted, gives us the root MSE (RMSE) in the interval <span class="math inline">\((3.57, 4.28)\)</span>. This RMSE is in the same units as our response variable and therefore more interpretable, implying that our prediction of <code>covid_vaccinated_or_accept</code> for the second period deviates from the actual value somewhere between <span class="math inline">\(3.57\)</span> to <span class="math inline">\(4.28\)</span> units (where a single unit is 1%).</p>
<p><strong>Our results are promising and statistically verified result, and we recommend using <span class="math inline">\(\text{Eq}\; (2)\)</span> for predicting vaccine uptake in people provided their behavior and beliefs are known.</strong></p>
</section>
</section>

</main>
<!-- /main column -->
<script id="quarto-html-after-body" type="application/javascript">
window.document.addEventListener("DOMContentLoaded", function (event) {
  const toggleBodyColorMode = (bsSheetEl) => {
    const mode = bsSheetEl.getAttribute("data-mode");
    const bodyEl = window.document.querySelector("body");
    if (mode === "dark") {
      bodyEl.classList.add("quarto-dark");
      bodyEl.classList.remove("quarto-light");
    } else {
      bodyEl.classList.add("quarto-light");
      bodyEl.classList.remove("quarto-dark");
    }
  }
  const toggleBodyColorPrimary = () => {
    const bsSheetEl = window.document.querySelector("link#quarto-bootstrap");
    if (bsSheetEl) {
      toggleBodyColorMode(bsSheetEl);
    }
  }
  toggleBodyColorPrimary();  
  const icon = "";
  const anchorJS = new window.AnchorJS();
  anchorJS.options = {
    placement: 'right',
    icon: icon
  };
  anchorJS.add('.anchored');
  const isCodeAnnotation = (el) => {
    for (const clz of el.classList) {
      if (clz.startsWith('code-annotation-')) {                     
        return true;
      }
    }
    return false;
  }
  const onCopySuccess = function(e) {
    // button target
    const button = e.trigger;
    // don't keep focus
    button.blur();
    // flash "checked"
    button.classList.add('code-copy-button-checked');
    var currentTitle = button.getAttribute("title");
    button.setAttribute("title", "Copied!");
    let tooltip;
    if (window.bootstrap) {
      button.setAttribute("data-bs-toggle", "tooltip");
      button.setAttribute("data-bs-placement", "left");
      button.setAttribute("data-bs-title", "Copied!");
      tooltip = new bootstrap.Tooltip(button, 
        { trigger: "manual", 
          customClass: "code-copy-button-tooltip",
          offset: [0, -8]});
      tooltip.show();    
    }
    setTimeout(function() {
      if (tooltip) {
        tooltip.hide();
        button.removeAttribute("data-bs-title");
        button.removeAttribute("data-bs-toggle");
        button.removeAttribute("data-bs-placement");
      }
      button.setAttribute("title", currentTitle);
      button.classList.remove('code-copy-button-checked');
    }, 1000);
    // clear code selection
    e.clearSelection();
  }
  const getTextToCopy = function(trigger) {
      const codeEl = trigger.previousElementSibling.cloneNode(true);
      for (const childEl of codeEl.children) {
        if (isCodeAnnotation(childEl)) {
          childEl.remove();
        }
      }
      return codeEl.innerText;
  }
  const clipboard = new window.ClipboardJS('.code-copy-button:not([data-in-quarto-modal])', {
    text: getTextToCopy
  });
  clipboard.on('success', onCopySuccess);
  if (window.document.getElementById('quarto-embedded-source-code-modal')) {
    // For code content inside modals, clipBoardJS needs to be initialized with a container option
    // TODO: Check when it could be a function (https://github.com/zenorocha/clipboard.js/issues/860)
    const clipboardModal = new window.ClipboardJS('.code-copy-button[data-in-quarto-modal]', {
      text: getTextToCopy,
      container: window.document.getElementById('quarto-embedded-source-code-modal')
    });
    clipboardModal.on('success', onCopySuccess);
  }
    var localhostRegex = new RegExp(/^(?:http|https):\/\/localhost\:?[0-9]*\//);
    var mailtoRegex = new RegExp(/^mailto:/);
      var filterRegex = new RegExp('/' + window.location.host + '/');
    var isInternal = (href) => {
        return filterRegex.test(href) || localhostRegex.test(href) || mailtoRegex.test(href);
    }
    // Inspect non-navigation links and adorn them if external
 	var links = window.document.querySelectorAll('a[href]:not(.nav-link):not(.navbar-brand):not(.toc-action):not(.sidebar-link):not(.sidebar-item-toggle):not(.pagination-link):not(.no-external):not([aria-hidden]):not(.dropdown-item):not(.quarto-navigation-tool):not(.about-link)');
    for (var i=0; i<links.length; i++) {
      const link = links[i];
      if (!isInternal(link.href)) {
        // undo the damage that might have been done by quarto-nav.js in the case of
        // links that we want to consider external
        if (link.dataset.originalHref !== undefined) {
          link.href = link.dataset.originalHref;
        }
      }
    }
  function tippyHover(el, contentFn, onTriggerFn, onUntriggerFn) {
    const config = {
      allowHTML: true,
      maxWidth: 500,
      delay: 100,
      arrow: false,
      appendTo: function(el) {
          return el.parentElement;
      },
      interactive: true,
      interactiveBorder: 10,
      theme: 'quarto',
      placement: 'bottom-start',
    };
    if (contentFn) {
      config.content = contentFn;
    }
    if (onTriggerFn) {
      config.onTrigger = onTriggerFn;
    }
    if (onUntriggerFn) {
      config.onUntrigger = onUntriggerFn;
    }
    window.tippy(el, config); 
  }
  const noterefs = window.document.querySelectorAll('a[role="doc-noteref"]');
  for (var i=0; i<noterefs.length; i++) {
    const ref = noterefs[i];
    tippyHover(ref, function() {
      // use id or data attribute instead here
      let href = ref.getAttribute('data-footnote-href') || ref.getAttribute('href');
      try { href = new URL(href).hash; } catch {}
      const id = href.replace(/^#\/?/, "");
      const note = window.document.getElementById(id);
      if (note) {
        return note.innerHTML;
      } else {
        return "";
      }
    });
  }
  const xrefs = window.document.querySelectorAll('a.quarto-xref');
  const processXRef = (id, note) => {
    // Strip column container classes
    const stripColumnClz = (el) => {
      el.classList.remove("page-full", "page-columns");
      if (el.children) {
        for (const child of el.children) {
          stripColumnClz(child);
        }
      }
    }
    stripColumnClz(note)
    if (id === null || id.startsWith('sec-')) {
      // Special case sections, only their first couple elements
      const container = document.createElement("div");
      if (note.children && note.children.length > 2) {
        container.appendChild(note.children[0].cloneNode(true));
        for (let i = 1; i < note.children.length; i++) {
          const child = note.children[i];
          if (child.tagName === "P" && child.innerText === "") {
            continue;
          } else {
            container.appendChild(child.cloneNode(true));
            break;
          }
        }
        if (window.Quarto?.typesetMath) {
          window.Quarto.typesetMath(container);
        }
        return container.innerHTML
      } else {
        if (window.Quarto?.typesetMath) {
          window.Quarto.typesetMath(note);
        }
        return note.innerHTML;
      }
    } else {
      // Remove any anchor links if they are present
      const anchorLink = note.querySelector('a.anchorjs-link');
      if (anchorLink) {
        anchorLink.remove();
      }
      if (window.Quarto?.typesetMath) {
        window.Quarto.typesetMath(note);
      }
      // TODO in 1.5, we should make sure this works without a callout special case
      if (note.classList.contains("callout")) {
        return note.outerHTML;
      } else {
        return note.innerHTML;
      }
    }
  }
  for (var i=0; i<xrefs.length; i++) {
    const xref = xrefs[i];
    tippyHover(xref, undefined, function(instance) {
      instance.disable();
      let url = xref.getAttribute('href');
      let hash = undefined; 
      if (url.startsWith('#')) {
        hash = url;
      } else {
        try { hash = new URL(url).hash; } catch {}
      }
      if (hash) {
        const id = hash.replace(/^#\/?/, "");
        const note = window.document.getElementById(id);
        if (note !== null) {
          try {
            const html = processXRef(id, note.cloneNode(true));
            instance.setContent(html);
          } finally {
            instance.enable();
            instance.show();
          }
        } else {
          // See if we can fetch this
          fetch(url.split('#')[0])
          .then(res => res.text())
          .then(html => {
            const parser = new DOMParser();
            const htmlDoc = parser.parseFromString(html, "text/html");
            const note = htmlDoc.getElementById(id);
            if (note !== null) {
              const html = processXRef(id, note);
              instance.setContent(html);
            } 
          }).finally(() => {
            instance.enable();
            instance.show();
          });
        }
      } else {
        // See if we can fetch a full url (with no hash to target)
        // This is a special case and we should probably do some content thinning / targeting
        fetch(url)
        .then(res => res.text())
        .then(html => {
          const parser = new DOMParser();
          const htmlDoc = parser.parseFromString(html, "text/html");
          const note = htmlDoc.querySelector('main.content');
          if (note !== null) {
            // This should only happen for chapter cross references
            // (since there is no id in the URL)
            // remove the first header
            if (note.children.length > 0 && note.children[0].tagName === "HEADER") {
              note.children[0].remove();
            }
            const html = processXRef(null, note);
            instance.setContent(html);
          } 
        }).finally(() => {
          instance.enable();
          instance.show();
        });
      }
    }, function(instance) {
    });
  }
      let selectedAnnoteEl;
      const selectorForAnnotation = ( cell, annotation) => {
        let cellAttr = 'data-code-cell="' + cell + '"';
        let lineAttr = 'data-code-annotation="' +  annotation + '"';
        const selector = 'span[' + cellAttr + '][' + lineAttr + ']';
        return selector;
      }
      const selectCodeLines = (annoteEl) => {
        const doc = window.document;
        const targetCell = annoteEl.getAttribute("data-target-cell");
        const targetAnnotation = annoteEl.getAttribute("data-target-annotation");
        const annoteSpan = window.document.querySelector(selectorForAnnotation(targetCell, targetAnnotation));
        const lines = annoteSpan.getAttribute("data-code-lines").split(",");
        const lineIds = lines.map((line) => {
          return targetCell + "-" + line;
        })
        let top = null;
        let height = null;
        let parent = null;
        if (lineIds.length > 0) {
            //compute the position of the single el (top and bottom and make a div)
            const el = window.document.getElementById(lineIds[0]);
            top = el.offsetTop;
            height = el.offsetHeight;
            parent = el.parentElement.parentElement;
          if (lineIds.length > 1) {
            const lastEl = window.document.getElementById(lineIds[lineIds.length - 1]);
            const bottom = lastEl.offsetTop + lastEl.offsetHeight;
            height = bottom - top;
          }
          if (top !== null && height !== null && parent !== null) {
            // cook up a div (if necessary) and position it 
            let div = window.document.getElementById("code-annotation-line-highlight");
            if (div === null) {
              div = window.document.createElement("div");
              div.setAttribute("id", "code-annotation-line-highlight");
              div.style.position = 'absolute';
              parent.appendChild(div);
            }
            div.style.top = top - 2 + "px";
            div.style.height = height + 4 + "px";
            div.style.left = 0;
            let gutterDiv = window.document.getElementById("code-annotation-line-highlight-gutter");
            if (gutterDiv === null) {
              gutterDiv = window.document.createElement("div");
              gutterDiv.setAttribute("id", "code-annotation-line-highlight-gutter");
              gutterDiv.style.position = 'absolute';
              const codeCell = window.document.getElementById(targetCell);
              const gutter = codeCell.querySelector('.code-annotation-gutter');
              gutter.appendChild(gutterDiv);
            }
            gutterDiv.style.top = top - 2 + "px";
            gutterDiv.style.height = height + 4 + "px";
          }
          selectedAnnoteEl = annoteEl;
        }
      };
      const unselectCodeLines = () => {
        const elementsIds = ["code-annotation-line-highlight", "code-annotation-line-highlight-gutter"];
        elementsIds.forEach((elId) => {
          const div = window.document.getElementById(elId);
          if (div) {
            div.remove();
          }
        });
        selectedAnnoteEl = undefined;
      };
        // Handle positioning of the toggle
    window.addEventListener(
      "resize",
      throttle(() => {
        elRect = undefined;
        if (selectedAnnoteEl) {
          selectCodeLines(selectedAnnoteEl);
        }
      }, 10)
    );
    function throttle(fn, ms) {
    let throttle = false;
    let timer;
      return (...args) => {
        if(!throttle) { // first call gets through
            fn.apply(this, args);
            throttle = true;
        } else { // all the others get throttled
            if(timer) clearTimeout(timer); // cancel #2
            timer = setTimeout(() => {
              fn.apply(this, args);
              timer = throttle = false;
            }, ms);
        }
      };
    }
      // Attach click handler to the DT
      const annoteDls = window.document.querySelectorAll('dt[data-target-cell]');
      for (const annoteDlNode of annoteDls) {
        annoteDlNode.addEventListener('click', (event) => {
          const clickedEl = event.target;
          if (clickedEl !== selectedAnnoteEl) {
            unselectCodeLines();
            const activeEl = window.document.querySelector('dt[data-target-cell].code-annotation-active');
            if (activeEl) {
              activeEl.classList.remove('code-annotation-active');
            }
            selectCodeLines(clickedEl);
            clickedEl.classList.add('code-annotation-active');
          } else {
            // Unselect the line
            unselectCodeLines();
            clickedEl.classList.remove('code-annotation-active');
          }
        });
      }
  const findCites = (el) => {
    const parentEl = el.parentElement;
    if (parentEl) {
      const cites = parentEl.dataset.cites;
      if (cites) {
        return {
          el,
          cites: cites.split(' ')
        };
      } else {
        return findCites(el.parentElement)
      }
    } else {
      return undefined;
    }
  };
  var bibliorefs = window.document.querySelectorAll('a[role="doc-biblioref"]');
  for (var i=0; i<bibliorefs.length; i++) {
    const ref = bibliorefs[i];
    const citeInfo = findCites(ref);
    if (citeInfo) {
      tippyHover(citeInfo.el, function() {
        var popup = window.document.createElement('div');
        citeInfo.cites.forEach(function(cite) {
          var citeDiv = window.document.createElement('div');
          citeDiv.classList.add('hanging-indent');
          citeDiv.classList.add('csl-entry');
          var biblioDiv = window.document.getElementById('ref-' + cite);
          if (biblioDiv) {
            citeDiv.innerHTML = biblioDiv.innerHTML;
          }
          popup.appendChild(citeDiv);
        });
        return popup.innerHTML;
      });
    }
  }
});
</script>
</div> <!-- /content -->




</body></html>